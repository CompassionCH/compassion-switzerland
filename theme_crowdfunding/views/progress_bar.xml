<odoo>
    <data>
        <!-- Goal progress -->
        <!-- This is a progress bar and related text for a goal (fund or sponsorships) -->
        <!-- [goal_reached], [goal_objective] and [goal_name] must be set before calling this template -->
        <template id="goal_progress" name="Goal progress">
            <div class="goal-progress__text-tile">
                <img src="/theme_crowdfunding/static/src/img/goal_icon.png" alt="Goal icon"/>
                <div>
                    <span class="text--bold">
                        <t t-esc="goal_reached"/>
                        <t t-esc="goal_name"/>
                    </span>
                    <span class="text--faded">
                        out of
                        <t t-esc="goal_objective"/>
                    </span>
                </div>
            </div>
            <div class="goal-progress__bar mb-2">

                <!-- Compute goal progress percentage -->
                <t t-set="progress_percentage" t-value="goal_reached / goal_objective * 100"/>

                <div class="progress">
                    <div class="progress-bar bg-compassion" role="progressbar"
                         t-attf-style="width: {{ progress_percentage }}%" t-att-aria-valuenow="progress_percentage"
                         aria-valuemin="0" aria-valuemax="100"/>
                </div>
                <span class="text--faded">
                    <t t-esc="progress_percentage"/>
                    %
                </span>
            </div>
        </template>

        <!-- Project progress -->
        <!-- This bundles the progress bars and deadline of a given project -->
        <!--Individual [project] must be set before calling this template -->
        <template id="crowdfunding_project_progress" name="Crowdfunding project progress">
            <!-- Setup data and display the sponsorship progress -->
            <t t-set="goal_name" t-value="'sponsored children'"/>
            <t t-set="goal_reached" t-value="project.number_sponsorships_reached"/>
            <t t-set="goal_objective" t-value="project.number_sponsorships_goal"/>
            <t t-call="crowdfunding_compassion.goal_progress"/>

            <!-- TODO: Fund icon selector -->
            <!-- Setup data and display the fund progress -->
            <t t-if="project.product_id">
                <t t-set="goal_name" t-value="'toilets built'"/>
                <t t-set="goal_reached" t-value="project.product_number_reached"/>
                <t t-set="goal_objective" t-value="project.product_number_goal"/>
                <t t-call="crowdfunding_compassion.goal_progress"/>
            </t>
        </template>
    </data>
</odoo>