<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="progress_bar">
        <div class="progress-bar" role="progressbar"
             t-attf-aria-valuenow="{{ registration.amount_raised_percents }}"
             aria-valuemin="0" aria-valuemax="100"
             t-attf-style="width: {{ registration.amount_raised_percents }}%; background-color: #e6b414;">
            <span t-attf-class="{{ to_hide }}"><t
                    t-esc="registration.amount_raised_percents"/>%
            </span>
        </div>
    </template>

    <template id="sport_icon">
        <span class="child-waiting"
              style="background-color: rgba(255, 255, 255, 0.7); height: 40px; width: 40px; margin-top: -8px; padding-top: 3px;">
            <t t-if="'Biking' == registration.sport_discipline_id.sport">
                <img style="height: 30px;"
                     src="/muskathlon/static/src/data/biking.png"/>
            </t>
            <t t-if="'Climbing' == registration.sport_discipline_id.sport">
                <img style="height: 30px;"
                     src="/muskathlon/static/src/data/climbing.png"/>
            </t>
            <t t-if="'Running' == registration.sport_discipline_id.sport">
                <img style="height: 30px;"
                     src="/muskathlon/static/src/data/running.png"/>
            </t>
            <t t-if="'Walking' == registration.sport_discipline_id.sport">
                <img style="height: 30px;"
                     src="/muskathlon/static/src/data/walking.png"/>
            </t>
        </span>
    </template>

    <template id="aboutme_formatted">
        <t t-set="details_obj" t-value="partner.ambassador_details_id"/>
        <h3 class="section-header"
            style="margin-top: 25px; margin-bottom: 10px;">
            Sport profile page
            <button type="button"
                    class="btn btn-default btn-xs"
                    data-toggle="modal"
                    data-target="#modal_ambassador_details">
                Change
            </button>
            <label for="upload_picture_2" type="button" class="btn btn-default btn-xs">
                <t t-if="details_obj.picture_large">
                    Change picture
                </t>
                <t t-else="">
                    Add a picture
                </t>
            </label>
        </h3>
        <!-- Ambassador details -->
        <div class="row">
            <div t-att-class="'col-md-6' if details_obj.picture_large else 'col-md-12'">
                <t t-if="details_obj.description and details_obj.quote">
                    <h4>About me: <span t-esc="details_obj.description" style="font-size: smaller;"/></h4>
                    <h4>My motto: <span t-esc="details_obj.quote" style="font-style: italic; font-size: smaller;"/></h4>
                </t>
                <t t-else="">
                    <p style="margin-top: 13px;">
                        Your profile is incomplete. Please fill in your data.
                    </p>
                </t>
            </div>
            <!-- Large picture -->
            <form id="form_picture_2" action="/my/api" method="post" enctype="multipart/form-data">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <input type="file"
                       name="picture_2"
                       id="upload_picture_2"
                       accept="image/*"
                       style="opacity: 0; position: absolute; z-index: -1;"/>
            </form>
            <t t-call="muskathlon.picture_2_formatted"/>
        </div>
    </template>

    <template id="tripinfos_formatted">
        <h3 class="section-header">
            Muskathlon trip information
            <button type="button"
                    class="btn btn-default btn-xs"
                    data-toggle="modal"
                    data-target="#modal_tripinfo">
                Change
            </button>
            <t t-if="survey_already_filled">
                <a class="btn btn-primary btn-xs" t-attf-href="{{survey_url.replace('start', 'print')}}/{{survey_already_filled.token}}">See completed medical survey</a>
            </t>
            <t t-else="">
                <t t-if="survey_not_started">
                    <a class="btn btn-primary btn-xs" t-attf-href="{{survey_url}}/{{survey_not_started.token}}">Complete medical survey</a>
                </t>
                <t t-else="">
                    <a class="btn btn-primary btn-xs" t-attf-href="{{survey_url}}">Complete medical survey</a>
                </t>
            </t>
        </h3>
        <t t-if="partner.ambassador_details_id.has_all_trip_infos()">
            <p>
                <h4>T-shirt Size : <t t-esc="partner.ambassador_details_id.tshirt_size"/></h4>

                <h4>Emergency person</h4>
                <span class="custom_icon fa fa-user"/>
                <t t-esc="partner.ambassador_details_id.emergency_name"/>,
                <t t-esc="partner.ambassador_details_id.emergency_relation_type"/><br/>
                <span class="custom_icon fa fa-phone"/>
                <t t-esc="partner.ambassador_details_id.emergency_phone"/><br/>

                <h4>Passport</h4>
                <span class="custom_icon fa fa-user"/>
                <t t-esc="partner.ambassador_details_id.birth_name"/><br/>
                <span class="custom_icon fa fa-file"/>
                <t t-esc="partner.ambassador_details_id.passport_number"/><br/>
                <span class="custom_icon fa fa-calendar"/>
                <t t-esc="partner.ambassador_details_id.passport_expiration_date"/><br/>
            </p>
        </t>
        <t t-else="">
            <p style="margin-top: 13px;">
                Your trip informations are incomplete. Please correct them.
            </p>
        </t>
    </template>

    <template id="picture_1_formatted">
        <div id="content_picture_1">
            <div t-field="partner.image_medium" t-field-options='{"widget": "image"}'/>
        </div>
    </template>

    <template id="picture_2_formatted">
        <t t-set="details_obj" t-value="partner.ambassador_details_id"/>
        <t t-set="picture" t-value="details_obj.picture_large"/>
        <div t-att-class="'col-md-6' if picture else 'col-md-12'">
            <div class="pictures-container">
                <div id="content_picture_2" class="col-sm-6">
                    <div t-field="details_obj.picture_large" t-field-options='{"widget": "image", "style": "max-width: 100px;"}' t-if="picture"/>
                </div>
            </div>
        </div>
    </template>
</odoo>
