<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="donation_successful" page="True">
        <t t-call="website.layout">
            <t t-set="title">Muskathlon</t>
            <div class="oe_structure compassion-wp">
                <div class="thank_you_container">
                    <t t-set="participant_url"
                       t-value="'/event/'+str(event.id)+'/participant/'+str(ambassador.id)"/>

                    <t t-set="event_url"
                       t-value="'/event/'+str(event.id)"/>

                    <div class="thank_you_image_container">
                        <img class="img-responsive" style="width: 100%" src="/muskathlon/static/src/img/compassion_thankyou_donation.jpg"/>
                    </div>
                    <div class="thank_you_text_container">
                        <h1>Thank you! Your gift helps release children from poverty!</h1>
                        <p class="quote">
                            It also brings
                            <a style="color: #0054a6;" t-attf-href="{{ participant_url }}"> <t t-esc="ambassador.name"/> </a>
                            closer to complete
                            <t t-if="ambassador.title.gender == 'F'">
                                her
                            </t>
                            <t t-else="">
                                his
                            </t>
                            goal for the
                            <a style="color: #0054a6;" t-attf-href="{{ event_url }}"><t t-esc="event.name"/></a>!
                        </p>
                    </div>
                </div>
            </div>
        </t>
    </template>
    <template id="donation_failure">
        <t t-call="website.layout">
            <t t-set="title">Muskathlon Registration</t>
            <div class="oe_structure compassion-wp">
                <div class="thank_you_container">
                    <!--<div class="thank_you_image_container">-->
                        <!--<img class="img-responsive" style="width: 100%" src="/muskathlon/static/src/img/compassion_thankyou_donation.jpg"/>-->
                    <!--</div>-->
                    <div class="thank_you_text_container">
                        <h1>Donation Aborted</h1>
                        <p class="quote">
                            Something went wrong during the donation process. Please try again.
                            <br/>
                            <br/>
                            If the payment process was successful, please call us.
                        </p>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="modal_donation">
        <!-- Modal -->
        <div class="modal fade" id="donation_modal" tabindex="-1"
             role="dialog"
             aria-labelledby="donation_modal_label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-body">
                        <form class="form-horizontal" id="payment_form"
                              data-callback="/muskathlon_donation/payment/">
                            <input type="hidden" id="ambassador_id" name="ambassador_id" t-att-value="registration.partner_id.id"/>
                            <input type="hidden" id="event_id" name="event_id" t-att-value="registration.event_id.id"/>
                            <fieldset>
                                <legend>Donation</legend>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                           for="amount_div_100">Amount
                                    </label>
                                    <div class="col-sm-7">
                                        <input class="form-control"
                                               type="number" step="any"
                                               min="0" id="amount_div_100"
                                               name="amount" t-att-value="amount or ''"
                                               placeholder="Amount"
                                               required="true"/>
                                    </div>
                                    <div class="col-sm-3">
                                        <select class="form-control"
                                                id="currency"
                                                name="currency">
                                            <option value="CHF"
                                                    selected="selected">CHF
                                            </option>
                                            <!--<option value="EUR" disabled="disabled">EUR</option>
                                            <option value="USD" disabled="disabled">USD</option>-->
                                        </select>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset>
                                <legend>Your personal details</legend>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                           for="firstname">Firstname
                                    </label>
                                    <div class="col-sm-4">
                                        <input class="form-control"
                                               type="text" name="FIRSTNAME"
                                               id="firstname" value=""
                                               placeholder="First name"
                                               required="true"/>
                                    </div>

                                    <label class="col-sm-2 control-label"
                                           for="lastname">Lastname
                                    </label>
                                    <div class="col-sm-4">
                                        <input class="form-control"
                                               type="text" name="LASTNAME"
                                               id="lastname" value=""
                                               placeholder="Last name"
                                               required="true"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                           for="email">Email
                                    </label>
                                    <div class="col-sm-10">
                                        <input class="form-control"
                                               type="email" name="email"
                                               id="email" value=""
                                               placeholder="Email"
                                               required="true"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                           for="phone">Telephone
                                    </label>
                                    <div class="col-sm-10">
                                        <!-- should accept a + at the beginning-->
                                        Y
                                        <input class="form-control"
                                               type="phone" id="phone"
                                               name="phone" value=""
                                               placeholder="Telephone number"
                                               required="true"/>
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset>
                                <legend>Home address</legend>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                           for="street">Address
                                    </label>
                                    <div class="col-sm-10">
                                        <input class="form-control"
                                               type="text"
                                               name="street"
                                               id="street" value=""
                                               placeholder="Street &amp; house number"
                                               required="true"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label"
                                           for="zip">ZIP code
                                    </label>
                                    <div class="col-sm-3">
                                        <!-- Some ZIP code (e.g. UK ones) contains letters -->
                                        <input class="form-control"
                                               type="text" name="zip"
                                               id="zip" value=""
                                               placeholder="Zip code"
                                               required="true"/>
                                    </div>
                                    <label class="col-sm-2 control-label"
                                           for="city">City
                                    </label>
                                    <div class="col-sm-5">
                                        <input class="form-control"
                                               type="text" name="city"
                                               id="city" value=""
                                               placeholder="City"
                                               required="true"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2"
                                           for="country_id">Country
                                    </label>
                                    <div class="col-sm-4">
                                        <select name="country_id"
                                                class="form-control">
                                            <t t-foreach="countries or []"
                                               t-as="country">
                                                <option t-att-value="country.id" t-att-selected="country.id == 44">
                                                    <t t-esc="country.name"/>
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                </div>
                            </fieldset>
                            <input type="hidden" name="LANGUAGE" value=""/>
                            <!-- Payment button -->
                            <t t-call="muskathlon.payment">
                                <t t-set="error_message">
                                    <p>An error occured during submission. Did you fill correctly all fields?</p>
                                </t>
                            </t>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </template>
</odoo>
