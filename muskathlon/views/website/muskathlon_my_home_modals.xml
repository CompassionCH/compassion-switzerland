<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <template id="modal_coordinates">
            <div class="modal fade" id="modal_change_coordinates" tabindex="-1"
                 role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">Coordinates
                            </h3>
                            <button type="button" class="close"
                                    data-dismiss="modal"
                                    aria-label="Close">
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="form_coordinates">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <t t-call="muskathlon.coordinates_fields"/>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default"
                                    data-dismiss="modal">Close
                            </button>
                            <button type="button" id="save_coordinates" class="btn btn-primary"
                                data-dismiss="modal">Save changes
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="modal_aboutme">
            <div class="modal fade" id="modal_change_aboutme" tabindex="-1"
                 role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">About me
                            </h3>
                            <button type="button" class="close"
                                    data-dismiss="modal"
                                    aria-label="Close">
                                <!--<span aria-hidden="true">&times;</span>-->
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="form_aboutme">
                                <div class="row">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                    <div t-attf-class="form-group col-xs-12">
                                        <label class="control-label" for="description">
                                            Description
                                        </label>
                                        <textarea name="description" class="form-control"><t t-raw="partner.ambassador_details_id.description"/></textarea>
                                    </div>
                                    <div t-attf-class="form-group col-xs-12">
                                        <label class="control-label" for="quote">
                                            Quote
                                        </label>
                                        <textarea name="quote" class="form-control"><t t-raw="partner.ambassador_details_id.quote"/></textarea>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default"
                                    data-dismiss="modal">Close
                            </button>
                            <button type="button" id="save_aboutme" class="btn btn-primary" data-dismiss="modal">Save
                                changes
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="modal_settings">
            <div class="modal fade" id="modal_change_settings" tabindex="-1"
                 role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">Settings
                            </h3>
                            <button type="button" class="close"
                                    data-dismiss="modal"
                                    aria-label="Close">
                                <!--<span aria-hidden="true">&times;</span>-->
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="form_settings">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <div class="row">
                                    <div t-attf-class="form-group col-xs-12">
                                        <label class="control-label" for="mail_copy_when_donation">
                                            Mail copy when donation
                                        </label>
                                        <t t-if="partner.ambassador_details_id.mail_copy_when_donation">
                                            <input name="mail_copy_when_donation" type="checkbox" checked=""/>
                                        </t>
                                        <t t-if="not partner.ambassador_details_id.mail_copy_when_donation">
                                            <input name="mail_copy_when_donation" type="checkbox"/>
                                        </t>
                                        <p class="help-block">Select this if you want a copy for each mail sent to your donators.</p>
                                    </div>
                                    <div class="form-group col-xs-12">
                                        <label class="control-label" for="thank_you_quote">
                                            Thank you quote
                                        </label>
                                        <textarea name="thank_you_quote" class="form-control"><t t-esc="partner.ambassador_details_id.thank_you_quote"/></textarea>
                                        <!-- removes HTML tags from textarea -->
                                        <script>
                                            var textarea = document.querySelector('textarea[name="thank_you_quote"]');
                                            var temp = document.createElement('div');
                                            temp.innerHTML = textarea.value;
                                            textarea.value = temp.textContent;
                                        </script>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default"
                                    data-dismiss="modal">Close
                            </button>
                            <button type="button" id="save_settings" class="btn btn-primary" data-dismiss="modal">Save changes
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="modal_tripinfos">
            <div class="modal fade" id="modal_change_tripinfos" tabindex="-1"
                 role="dialog" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">Trip infos
                            </h3>
                            <button type="button" class="close"
                                    data-dismiss="modal"
                                    aria-label="Close">
                                <!--<span aria-hidden="true">&times;</span>-->
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="form_tripinfos">
                                <fieldset>
                                    <div class="row">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <div t-attf-class="form-group col-sm-6">
                                            <label class="control-label">
                                                T-shirt size
                                            </label>
                                            <select name="tshirt_size" class="form-control">
                                                <t t-foreach="tshirt" t-as="size">
                                                    <option t-att-value="size[0]"
                                                            t-att-selected="size[0] == partner.ambassador_details_id.tshirt_size">
                                                        <t t-esc="size[1]"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                        <div class="col-sm-6"/>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <legend>Emergency person</legend>
                                    <div class="row">
                                        <div t-attf-class="form-group col-xs-12">
                                            <label class="control-label" for="emergency_name">
                                                Name
                                            </label>
                                            <input class="form-control" type="text" name="emergency_name" t-att-value="partner.ambassador_details_id.emergency_name"/>
                                        </div>
                                        <div t-attf-class="form-group col-sm-6">
                                            <label class="control-label" for="emergency_phone">
                                                Phone
                                            </label>
                                            <input class="form-control" type="phone" name="emergency_phone" t-att-value="partner.ambassador_details_id.emergency_phone"/>
                                        </div>
                                        <div t-attf-class="form-group col-sm-6">
                                            <label class="control-label" for="emergency_relation_type">
                                                Relation type
                                            </label>
                                            <select name="emergency_relation_type" class="form-control">
                                                <t t-foreach="ert" t-as="type">
                                                    <option t-att-value="type[0]"
                                                            t-att-selected="type[0] == partner.ambassador_details_id.emergency_relation_type">
                                                        <t t-esc="type[1]"/>
                                                    </option>
                                                </t>
                                            </select>
                                        </div>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <legend>Passport</legend>
                                    <div class="row">
                                        <div t-attf-class="form-group col-xs-12">
                                            <label class="control-label" for="birth_name">
                                                Birth name
                                            </label>
                                            <input class="form-control" type="text" name="birth_name" t-att-value="partner.ambassador_details_id.birth_name"/>
                                        </div>
                                        <div t-attf-class="form-group col-sm-6">
                                            <label class="control-label" for="passport_number">
                                                Passport number
                                            </label>
                                            <input class="form-control" type="text" name="passport_number" t-att-value="partner.ambassador_details_id.passport_number"/>
                                        </div>
                                        <div t-attf-class="form-group col-sm-6">
                                            <label class="control-label" for="passport_expiration_date">
                                                Passport expiration date
                                            </label>
                                            <input class="form-control" type="text" name="passport_expiration_date" t-att-value="partner.ambassador_details_id.passport_expiration_date"/>
                                            <!-- adds datepicker to password expiration date field -->
                                            <script>
                                                $(function() {
                                                    $('input[name="passport_expiration_date"]').datepicker({ dateFormat: 'yy-mm-dd' });
                                                });
                                            </script>
                                        </div>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default"
                                    data-dismiss="modal">Close
                            </button>
                            <button type="button" id="save_tripinfos" class="btn btn-primary" data-dismiss="modal">Save
                                changes
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </data>
</odoo>
