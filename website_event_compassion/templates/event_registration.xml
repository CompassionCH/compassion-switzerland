<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="registration" page="True" name="Event registration page">
        <t t-call="website.publish_management">
            <t t-set="object" t-value="event"/>
            <t t-set="publish_edit" t-value="True"/>
        </t>
        <t t-call="website.layout">
            <div id="wrap">
                <div class="container">
                    <h1 t-field="event.name"/>
                    <t t-if="registration_open">
                        <t t-raw="form.form_render()"/>
                    </t>
                    <t t-if="registration_closed">
                        <p>Registrations are closed, sorry.</p>
                    </t>
                    <t t-if="not registration_closed and registration_full">
                        <p>We already have the maximum participants, sorry.</p>
                    </t>
                    <t t-if="registration_not_started">
                        <p>Registrations will open soon.</p>
                    </t>
                </div>
            </div>
        </t>
    </template>

    <template id="event_registration_successful" name="Event registration success">
        <t t-call="website.layout">
        <div class="container">
            <h3>We are glad to confirm your registration to <t t-esc="event.name"/></h3>
            <div class="row">
                <div class="col-md-3 mt16">
                    <h4>Details</h4>
                </div>
                <div class="col-md-9 mt16">
                    <h4><a t-attf-href="{{event.wordpress_url or '/event/' + slug(event.compassion_event_id) + '/registration'}}"><t t-esc="event.name"/></a></h4>
                    <i class="fa fa-clock-o"/> <span itemprop="startDate" t-esc="event.date_begin_located[:-3]"> </span> <i>to</i> <span itemprop="endDate" t-esc="event.date_end_located[:-3]"> </span>
                    <div itemprop="location" class="mt16 mb8" t-field="event.address_id" t-options='{
                            "widget": "contact",
                            "fields": ["name", "address", "phone", "mobile", "fax", "email"]
                            }'/>
                </div>
                <div class="col-md-3 mt16">
                    <h4>Your registration</h4>
                </div>
                <div class="col-md-9 mt16">
                    <table class='table table-bordered table-striped'>
                        <thead>
                            <tr>
                                <th>Reference</th>
                                <th>Name</th>
                                <th>E-mail</th>
                                <th>Phone</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="attendees" t-as="attendee">
                                <tr>
                                    <td><t t-esc="attendee.id"/></td>
                                    <td><i class="fa fa-user"></i> <t t-if='attendee.name'><t t-esc="attendee.name"/></t><t t-if='not attendee.name'>N/A</t></td>
                                    <td><i class="fa fa-envelope"></i> <t t-if='attendee.email'><t t-esc="attendee.email"/></t><t t-if='not attendee.email'>N/A</t></td>
                                    <td><i class="fa fa-phone"></i> <t t-if='attendee.phone'><t t-esc="attendee.phone"/></t><t t-if='not attendee.phone'>N/A</t></td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </t>
    </template>
</odoo>
