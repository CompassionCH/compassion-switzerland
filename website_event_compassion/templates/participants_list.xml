<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <!-- This template can be inherited to customize inside a participant card (adding icons for instance) -->
    <template id="participant_card" name="Participant card"/>

    <template id="event_participants_list" name="Event participants list">
        <div id="compassion_event_participants" t-attf-class="row {{background_color_class}}">
            <div class="col-md-1"/>
            <div class="col-md-10 col-xs-12">
                <t t-if="event.registration_ids.filtered('website_published')">
                    <h1 class="participants_title">Participants</h1>
                </t>
                <t t-else="">
                    <h3 class="event_no_participant">This event has no participant yet.</h3>
                </t>
                <div class="participants">
                    <t t-foreach="event.registration_ids.filtered('website_published')" t-as="registration">
                        <div class="participant_card">
                            <a t-att-href="registration.website_url">
                                <div t-attf-class="participant_image {{background_color_class}}"
                                     t-attf-style="background-image: url('/web/image/event.registration/{{ registration.id }}/ambassador_picture_1');">
                                    <t t-call="website_event_compassion.participant_card"/>
                                </div>
                            </a>
                            <t t-log="participant"/>
                            <a t-att-href="registration.website_url">
                                <div class="participant_details_link">
                                    <h4 class="name">
                                        <t t-esc="registration.partner_display_name"/>
                                    </h4>
                                    <div class="progress">
                                        <div class="progress-bar" role="progressbar"
                                             t-attf-aria-valuenow="{{ registration.amount_raised_percents }}"
                                             aria-valuemin="0"
                                             aria-valuemax="100"
                                             t-attf-style="width: {{ registration.amount_raised_percents }}%;">
                                        </div>
                                    </div>
                                    <div class="amount_raised">
                                        <t t-esc="'{:n}'.format(registration.amount_raised).replace(',', '\'')"/>
                                        /
                                        <t t-esc="'{:n}'.format(registration.amount_objective).replace(',', '\'')"/>
                                        CHF
                                    </div>
                                    <h5 class="text-uppercase name details">
                                        <span class="details_text">Participant<br/>details
                                        </span>
                                    </h5>
                                </div>
                            </a>
                        </div>
                    </t>
                </div>
            </div>
        </div>

        <!-- animation for participants details button -->
        <script>
            $('.participant_card a').hover(function() {
            $(this).find('.details').css('animation-name', 'show_details_button').css('animation-fill-mode',
            'forwards');
            }, function() {
            $(this).find('.details').css('animation-name', 'hide_details_button').css('animation-fill-mode',
            'forwards');
            });
        </script>
    </template>
</odoo>
